{% extends 'root/base.html' %}
{% load static %}

{% block optionalCSS %}
<style>
    #agregar-cot table th{
        text-align: center!important;
    }
</style>
{% endblock %}

{% block content %}
    <div class="text-md-left text-center">
        <h2>Cotizaciones</h2>
    </div>
    <div class="text-center text-md-right">
        {% if user.rol.nombre == 'SuperUser' or user.rol.nombre == 'Ventas' %}
        <button id="btn-agregar-cot" class="btn btn-success d-inline"><i class="nc-icon nc-simple-add"></i> Cotización</button>
        <button id="btn-continuar-cot" class="btn btn-info d-none" onclick="cargar_cot()">Continuar</button>
        {% endif %}
    </div>
    <div id="container-cotizaciones" class="table-responsive table-full-width d-block">
        <table class="table table-hover table-responsive table-striped" id="tabla_cotizaciones">
            <thead>
                <th class="text-center">#</th>
                <th class="text-center">Cliente</th>
                <th class="text-center">Vendedor</th>
                <th class="text-center">Total</th>
                <th class="text-center">Fecha creada</th>
                <th class="text-center">Acciones</th>
            </thead>
            <tbody id="row-container-cots">
                {% for c in cotizaciones %}
                <tr id="cotizaciones-{{c.id_cotizacion}}">
                    <td class="pt-3 cotizaciones_id_cotizacion">{{ c.id_cotizacion }}</td>
                    <td class="pt-3 cotizaciones_cliente">{{ c.usuario_c }}</td>
                    <td class="pt-3 cotizaciones_ventas">{{ c.usuario_v }}</td>
                    <td class="pt-3 cotizaciones_total">${{ c.total }}</td>
                    <td class="pt-3 cotizaciones_fecha_creada">{{ c.fecha_creada }}</td>
                    <td class="pt-3 cotizaciones_acciones">
                        <button type="button" class="btn btn-primary" onclick="" data-toggle="modal" data-target="#ver_cotizacion">
                            <i class="fa fa-eye"></i>
                        </button>
                        <button type="button" class="btn btn-danger"><i class="fa fa-trash"></i></button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div id="container-analisis" class="table-responsive table-full-width d-none">
        <table class="table table-hover table-responsive table-striped" id="tabla_analisis_2">
        <thead>
            <th>Código</th>
            <th>Nombre</th>
            <th>Descripción</th>
            <th>Precio</th>
            <th>Tiempo Aprox.</th>
            <th>Acciones</th>
            <th>Checkbox</th>
        </thead>
        <tbody>
        {% for a in analisis %}
            <tr class="analisis-row">
                <td class="analisis-codigo">{{ a.codigo }}</td>
                <td class="analisis-nombre">{{ a.nombre }}</td>
                <td class="analisis-desc">{{ a.descripcion }}</td>
                <td class="analisis-precio">${{ a.precio }}</td>
                <td class="analisis-tiempo">{{ a.tiempo }}</td>
                <td class="analisis-ver" data-id="{{ a.id_analisis }}">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ver_analisis"><i class="fa fa-eye tabla-icon"></i></button>
                </td>
<<<<<<< HEAD
                <td class="analisis-seleccionar" data-id="{{ a.id_analisis }}">
=======
                <td class="analisis-seleccionar text-center" data-id="{{ a.id_analisis }}">
>>>>>>> USV01-01
                    <input class="form-check-input" name="cot[]" type="checkbox" value="{{ a.id_analisis }}">
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>
    {% include './modals/agregar-cot.html' %}
    {% include './modals/visualizar-cot.html' %}
{% endblock content %}

{% block optionalJS %}
    <script src="{% static 'ventas/js/table.js' %}" type="text/javascript"></script>
    <script src="{% static 'root/js/notificaciones.js' %}" type="text/javascript"></script>
    <script src="{% static 'ventas/js/cotizaciones.js' %}" type="text/javascript"></script>
{% endblock %}
