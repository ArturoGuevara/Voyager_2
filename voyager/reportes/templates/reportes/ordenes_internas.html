{% extends 'root/base.html' %}
{% load static %}

{% block optionalCSS %}

{% endblock %}

{% block content %}
    <div class="text-md-left text-center">
        <h2>Órdenes Internas</h2>
    </div>
    <div class="text-center text-md-right">
        <button class="btn btn-info" data-toggle="modal" data-target="#modal_paquete"><i class="nc-icon nc-email-83"></i> Paquete</button>
    </div>
    <div id="table" class="table-responsive table-full-width">
        <table class="table table-hover table-responsive table-striped" id="tabla_ordenes_internas">
            <thead>
                <th>#</th>
                <th>Estatus</th>
                <th>Empresa</th>
                <th>Usuario</th>
                <th>Localidad</th>
                <th>Acciones</th>
            </thead>
            <tbody>
                {% for o in ordenes %}
                <tr id="oi-{{o.idOI}}">
                    <td class="pt-3 oiData oi_idOI">{{ o.idOI }}</td>
                    <td class="pt-3 oiData oi_estatus">{{ o.estatus }}</td>
                    <td class="pt-3 oiData oi_empresa">{{ o.usuario.empresa }}</td>
                    <td class="pt-3 oiData oi_usuario">{{ o.usuario.user }}</td>
                    <td class="pt-3 oiData oi_localidad">{{ o.localidad }}</td>
                    <td colspan="4">
                        <button type="button" class="btn btn-primary" onclick="visualizar_info_oi({{ o.idOI }})" data-toggle="modal" data-target="#modal-visualizar-orden">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button type="button" class="btn btn-warning" onclick="cargar_info_oi({{ o.idOI }})" data-toggle="modal" data-target="#modal-orden-interna">
                            <i class='fas fa-edit'></i>
                        </button>
                        <button type="button" class="btn btn-success" onclick="" data-toggle="modal" data-target="">
                            <i class='fas fa-paper-plane'></i>
                        </button>
                        <button type="button" class="btn btn-danger" onclick="" data-toggle="modal" data-target="">
                            <i class='fas fa-trash'></i>
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% include './modals/paquete.html' %}
    {% include './modals/ver-orden.html' %}
    {% include './modals/visualizar-orden.html' %}
    {% include './modals/actualizar_oi.html' %}
{% endblock content %}

{% block optionalJS %}
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <script src="{% static 'reportes/js/table.js' %}" type="text/javascript"></script>
    <script src="{% static 'root/js/notificaciones.js' %}" type="text/javascript"></script>
    <script src="{% static 'reportes/js/orden.js' %}" type="text/javascript"></script>
    <script src="{% static 'reportes/js/validacion.js' %}" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

    {% if successcode == "200" %}
        <script>
            showNotification('top','right','Paquete creado exitosamente')
        </script>
    {% elif successcode == "404" %}
        <script>
            showNotification('top','right','Código de rastreo no existe')
        </script>
    {% elif successcode == "204" %}
        <script>
            showNotification('top','right','No se encontró la Orden Interna')
        </script>
    {% endif %}
{% endblock %}
