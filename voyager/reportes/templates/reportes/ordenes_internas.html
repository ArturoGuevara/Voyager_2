{% extends 'root/base.html' %}
{% load static %}

{% block optionalCSS %}

{% endblock %}

{% block content %}
    {% if successcode == "200" %}
    <div class="alert alert-success alert-dismissible fade show d-none" data-show="{{ request.session.alerta }}" role="alert" id="success-alert">
    <strong>Paquete creado exitosamente</strong>
    </div>
    {% elif successcode == "404" %}
    <div class="alert alert-danger alert-dismissible fade show d-none" data-show="{{ request.session.alerta }}" role="alert" id="success-alert">
    <strong>Código de rastreo no existe</strong>
    </div>
    {% elif successcode == "204" %}
    <div class="alert alert-danger alert-dismissible fade show d-none" data-show="{{ request.session.alerta }}" role="alert" id="success-alert">
    <strong>No se encontró la Orden Interna.</strong>
    </div>
    {% endif %}
    <div class="text-md-right text-center">
        <h2>Órdenes internas
            <button class="btn btn-warning" data-toggle="modal" data-target="#modal_paquete"><i class="nc-icon nc-app"></i> Crear Paquete</button>
            <button class="btn btn-success" data-toggle="modal" data-target="#modal_paquete"><i class="nc-icon nc-app"></i> Orden Interna</button>
        </h2>
    </div>
    <div id="table" class="table-responsive table-full-width">
        <table class="table table-hover e-bordered table-responsive-md table-striped" id="tabla_ordenes_internas">
            <thead>
                <th class="text-center">Orden Interna</th>
                <th class="text-center">Estatus</th>
                <th class="text-center">Empresa</th>
                <th class="text-center">Usuario</th>
                <th class="text-center">Localidad</th>
                <th class="text-center">Acciones</th>
            </thead>
            <tbody>
                {% for o in ordenes %}
                <tr id="oi-{{o.idOI}}">
                    <td class="pt-3-half oiData oi_idOI">{{ o.idOI }}</td>
                    <td class="pt-3-half oiData oi_estatus">{{ o.estatus }}</td>
                    <td class="pt-3-half oiData oi_empresa">{{ o.usuario.empresa }}</td>
                    <td class="pt-3-half oiData oi_usuario">{{ o.usuario.user }}</td>
                    <td class="pt-3-half oiData oi_fecha_muestreo">{{ o.localidad }}</td>
                    <td>
                        <button type="button" class="btn btn-primary" onclick="" data-toggle="modal" data-target="">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button type="button" class="btn btn-warning" onclick="cargar_info_oi({{ o.idOI }})" data-toggle="modal" data-target="#modal-orden-interna">
                            <i class='fas fa-edit'></i>
                        </button>
                        <button type="button" class="btn btn-success" onclick="" data-toggle="modal" data-target="">
                            <i class='fas fa-paper-plane'></i>
                        </button>
                        <button type="button" class="btn btn-danger" onclick="" data-toggle="modal" data-target="">
                            <i class='fas fa-trash'></i>
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% include './modals/paquete.html' %}
    {% include './modals/ver-orden.html' %}
{% endblock content %}

{% block optionalJS %}
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <script src="{% static 'reportes/js/table.js' %}" type="text/javascript"></script>
    <script src="{% static 'reportes/js/orden.js' %}" type="text/javascript"></script>
    <script src="{% static 'reportes/js/validacion.js' %}" type="text/javascript"></script>
{% endblock %}