{% extends 'root/base.html' %}
{% load static %}

{% block optionalCSS %}
<link href="{% static 'cuentas/css/usuarios.css' %}" rel="stylesheet"/>
{% endblock %}

{% block content %}
{{ request.session.crear_staff_status }}
<div class="text-md-left text-center">
    {% if request.session.userrole == 'Director' or request.session.userrole == 'SuperUser'%}
    <h2>Usuarios
        <button type="button" class="btn btn-secondary text-dark border-0" data-container="body" data-toggle="popover" data-trigger="hover" data-placement="right" data-content="Visualice y administre a los usuarios del sistema.">
            <i class="fa fa-question-circle fa-lg"></i>
        </button>
    {% else %}
    <h2>Clientes
        <button type="button" class="btn btn-secondary text-dark border-0" data-container="body" data-toggle="popover" data-trigger="hover" data-placement="right" data-content="Visualice y administre a los clientes.">
            <i class="fa fa-question-circle fa-lg"></i>
        </button>
    {% endif %}
        <div class="text-center text-md-right">
            {% if request.session.userrole == 'Director' or request.session.userrole == 'SuperUser' %}
                <a id="btn-agregar-cot" class="btn btn-success d-inline" data-container="body" href="/cuentas/crear_staff/" data-toggle="popover" data-trigger="hover" data-placement="right" data-content="Agregue a un nuevo miembro de IFC."><i class="nc-icon nc-simple-add"></i> Staff</a>
            {% endif %}
            {% if request.session.userrole == 'Director' or request.session.userrole == 'Ventas' or request.session.userrole == 'SuperUser' %}
                <a id="btn-agregar-cot" class="btn btn-success d-inline" data-container="body" href="/cuentas/crear_cliente/" data-toggle="popover" data-trigger="hover" data-placement="right" data-content="Agregue a un nuevo cliente."><i class="nc-icon nc-simple-add"></i> Cliente</a>
            {% endif %}
        </div>
    </h2>
</div>
<div id="table" class="table-responsive table-full-width">
    <table class="table table-hover e-bordered table-responsive-md table-striped" id="tabla_usuarios">
        <thead>
            <th class="text-center"># <i class="fa fa-sort"></i></th>
            <th class="text-center">Nombre <i class="fa fa-sort"></i></th>
            <th class="text-center">Rol <i class="fa fa-sort"></i></th>
            <th class="text-center">Estatus <i class="fa fa-sort"></i></th>
            <th class="text-center">Empresa <i class="fa fa-sort"></i></th>
            <th data-container="body" data-toggle="popover" data-trigger="hover" data-placement="left" data-content="Visualice o elimine a un usuario">Acciones <i class="fa fa-question-circle fa-lg"></th>
        </thead>
        <tbody>
            {% for c in usuarios %}
            <tr id="usuario-{{c.user.id}}">
                <td class="pt-3 u_id">{{ c.user.id }}</td>
                <td class="pt-3 u_nombre">{{ c.nombre}} {{ c.apellido_paterno }} {{ c.apellido_materno }}</td>
                <td class="pt-3 u_nombre">{{ c.rol.nombre }}</td>
                <td class="pt-3 u_estatus">{{ c.estatus_pago }}</td>
                <td class="pt-3 u_empresa">{{ c.empresa }}</td>
                <td>
                    <button type="button" class="btn btn-primary" onclick="cargar_info_usuario({{ c.user.id }})" data-toggle="modal" data-target="#modal_info_usuario">
                        <i class="fas fa-eye"></i>
                    </button>
                    <!--<button type="button" class="btn btn-danger" onclick="" data-toggle="modal" data-target="">
                        <i class='fas fa-trash'></i>
                    </button> -->
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


{% include './modals/info_usuario.html' %}
{% include './modals/actualizar_usuario.html' %}

{% endblock content %}

{% block optionalJS %}
    <script src="{% static 'cuentas/js/table.js' %}" type="text/javascript"></script>
    <script src="{% static 'cuentas/js/usuario.js' %}" type="text/javascript"></script>
    <script src="{% static 'cuentas/js/notificaciones_usuario.js' %}" type="text/javascript"></script>
{% endblock %}
